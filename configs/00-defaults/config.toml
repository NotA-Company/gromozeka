[bot]
# Your Telegram bot token from @BotFather
token = "YOUR_BOT_TOKEN_HERE"
bot_owners = ["YOUR_BOT_OWNER_USERNAME_HERE"]

# Salt for signing [not]spam buttons to reject those actions on random messages
spam-button-salt = "YOUR_SALT_HERE"

[bot.defaults]
# Can chat admins change channel-specific bot settings?
admin-can-change-settings = true
# Bot nicknames for mention purposes. Comma-separated list
bot-nicknames = "–ì—Ä–æ–º–æ–∑–µ–∫–∞, Gro"
# Message format for LLM, currently supported: `text`, `json`, `smart`
llm-message-format = "json"
# Can we use tools
use-tools = true
# Should we save images to S3 for future using?
save-images = true
# Should we parse images via LLM
parse-images = true

# For LLM-parsing We'll try to get smallest image, but larger than this
# Set to 0 to get largest image possible
# Set to 1 to get smallest image possible
optimal-image-size        = 896

# Allow /draw command
allow-draw = true
# Allow /analyze command
allow-analyze = true
# Allow /summary and /topic_summary commands
allow-summary = true
# Allow /wather command
allow-weather = true
# Allow /web_search command
allow-web-search = true

# Allow non-admins to send /spam command
allow-user-spam-command = false
# Automatically detect and delete spam messages
detect-spam = false
# If user has more than this amount of messages in chat, do not check it for spam (0 - alwayx check)
auto-spam-max-messages = 10
# In case of spam - delete all known user messages
spam-delete-all-user-messages = true
# Minimal SPAM Score to block user and delete it's messages
spam-ban-treshold = 90
# Minimal SPAM Score to add warn message
spam-warn-treshold = 60
# Allow to block old (with more, than `auto-spam-max-messages` messages) users with /spam command
allow-mark-spam-old-users = false

#Bayes filter settings
bayes-enabled = false
bayes-min-confidence = 0.5
bayes-auto-learn = true

# Allow reaction in bot mention (by username and by name)
allow-mention = true
# Allow reaction on reply of bot message
allow-reply = true
# Allow reaction on private message
allow-private = true

# Probability of random answer to any message (set 0 for disable, 1 for always)
random-answer-probability = 0.01
# In case of random answer - answer to chat admin messages?
random-answer-to-admin = true

tools-used-prefix        = "üõ†"
fallback-happened-prefix = "ü§ñ"

summary-model                   = "openrouter/gemma-3-27b-it-free"
summary-fallback-model          = "openrouter/deepseek-chat-v3.1-free"
chat-model                      = "openrouter/gemma-3-12b-it-free"
fallback-model                  = "openrouter/deepseek-chat-v3.1-free"
image-parsing-model             = "openrouter/gemma-3-27b-it-free"
image-generation-model          = "yandex-art"
image-generation-fallback-model = "openrouter/gemini-2.5-flash-image"

summary-prompt     = "–°—É–º–º–∞—Ä–∏–∑–∏—Ä—É–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ. –£–∫–∞–∑—ã–≤–∞–π –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫—Ç–æ –æ–±—Å—É–∂–¥–∞–ª."
parse-image-prompt = "–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ"
chat-prompt        = """
–¢—ã - –ü—Ä–∏–Ω–Ω–∏: –≤–∞–π–±–æ–≤—ã–π, –Ω–æ —É–º–Ω—ã–π –ø–∏–Ω–≥–≤–∏–Ω –∏–∑ Disgaea –º—É–∂—Å–∫–æ–≥–æ –ø–æ–ª–∞.
"""

chat-prompt-suffix = """
–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —É–∫–∞–∑–∞–Ω—ã –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ, –≥–¥–µ:
* `login` - –õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* `name` - –ü–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* `date` - –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (–≤ UTC).
* `messageId` - ID —Å–æ–æ–±—â–µ–Ω–∏—è.
* `type` - –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è: `text`, `image`, `sticker`
* `text` - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.
* `replyId` - ID —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–≤–µ—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ.
* `quote` - –¶–∏—Ç–∞—Ç–∞. –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å–≤–æ—ë–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø—Ä–æ—Ü–∏—Ç–∏—Ä–æ–≤–∞–ª –¥—Ä—É–≥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
* `media_description` - –û–ø–∏—Å–∞–Ω–∏–µ, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è).

–û—Ç–≤–µ—á–∞–π —Ç–∞–∫ –∂–µ –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ, –Ω–æ –∑–∞–ø–æ–ª–Ω—è–π —Ç–æ–ª—å–∫–æ –ø–æ–ª–µ `text` (–∏ `quote`, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ü–∏—Ç–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è).
–í –¢–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
"""

[database]
# Database configuration
path = "bot_data.db"
# Connection pool settings
max_connections = 5
timeout = 30

[logging]
# Logging configuration
level = "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
console = true
# Optional: log to file (uncomment to enable)
file = "logs/gromozeka.log"
error-file = "logs/gromozeka.err.log"
rotate = true

[logging.logger."openai._base_client"]
propagate = false
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
console = true
console-level = "INFO"
file = "logs/openai.log"
file-level = "DEBUG"
rotate = true


[openweathermap]
enabled = false
# OpenWeatherMap API key from https://openweathermap.org/api
api-key = "YOUR_OPENWEATHERMAP_API_KEY"

# Cache time-to-live in seconds
geocoding-cache-ttl = 2592000  # 30 days (coordinates rarely change)
weather-cache-ttl = 3600       # 60 minutes (weather updates frequently)

# API request timeout in seconds
request-timeout = 10

# Default language for location names (ru, en, etc.)
default-language = "ru"

[yandex-search]
enabled = false
# Yandex Cloud credentials for Search API
api-key = "YOUR_YANDEX_SEARCH_API_KEY"
folder-id = "YOUR_YANDEX_FOLDER_ID"

# Cache time-to-live in seconds
cache-ttl = 86400  # 60 * 60 * 24 = 1 day (Search results shouldn't change often)

# API request timeout in seconds
request-timeout = 30

# Rate limiting settings
rate-limit-requests = 10  # Maximum requests per time window
rate-limit-window = 60    # Time window in seconds

# Default search parameters. Will be passed to search as `**kwargs`
[yandex-search.defaults]
# By default empty, use client defaults
#searchType = "SEARCH_TYPE_RU"
#familyMode = "FAMILY_MODE_MODERATE"
#page = 0
#fixTypoMode = "FIX_TYPO_MODE_ON"
#sortMode = "SORT_MODE_BY_RELEVANCE"
#sortOrder = "SORT_ORDER_DESC"
#groupMode = "GROUP_MODE_DEEP"
#groupsOnPage = 5
#docsInGroup = 2
#maxPassages = 2
#region = "225"  # Russia. See https://yandex.cloud/ru/docs/search-api/reference/regions for examples
#l10n = "LOCALIZATION_RU"
#useCache = true